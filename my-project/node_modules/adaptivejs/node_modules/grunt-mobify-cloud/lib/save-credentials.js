var fs = require('fs');

module.exports = function(username, key, settingsPath){
    var settings = {
        username: username,
        api_key: key
    };

    if(!settings.username || !settings.api_key){
        console.log('You must enter a username and api key like so:');
        console.log('--user="user@mail.com" --key="my_api_key"');
        return false;
    }

    try{
        fs.writeFileSync(settingsPath, JSON.stringify(settings, null, "    "));
        console.log('Saved credentials!');
        return true;
    }
    catch(e){
        console.log('Failed to save credentials.');
        throw e;
    }
};