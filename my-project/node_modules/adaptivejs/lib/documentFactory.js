define(['mobifyjs/capture'], function(Capture) {
    var DocumentFactory = {};

    var markup = '<html><head></head><body></body></html>';

    /**
     * This creates a fake HTML document, then adds the string give to it as the
     * content or defaults to the simple markup above.
     * It simply creates an iframe and then grabs the content.
     */
    DocumentFactory.makeDocument = function(docHTML, disable) {
        disable = (disable !== undefined) ? disable : true;
        docHTML = docHTML || markup;
        if (disable) {
            docHTML = Capture.disable(docHTML, 'x-');
        }
        var iframe = document.createElement('iframe');
        iframe.style.display = 'none';
        document.body.appendChild(iframe);
        var doc = iframe.contentDocument;
        doc.open();
        doc.write(docHTML);
        doc.close();

        return doc;
    };

    return DocumentFactory;
});
