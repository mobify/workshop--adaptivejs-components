define([], function() {
    /**
     * Converts template names to a format matching Mobify CSS naming
     * conventions, including a namespace to avoid collisions with
     * existing dust helpers.
     */
    var normalizeName = function(name) {
        return 'c-' + name
            .replace(/([a-z\d])__([a-z\d])/i, '$1~~$2')
            .replace(/([A-Z])/g, '-$1')
            .replace(/[-_\s]+/g, '-')
            .replace(/(^-|-$)/g, '')
            .replace('~~', '__')
            .toLowerCase();
    };

    /**
     * Creates a dust helper that acts as syntactic sugar for raw component
     * helper calls.
     */
    var makeHelper = function(templatePath) {
        return function(chunk, context, bodies, params) {
            params = params || {};

            // Set the `is` param required by the `component` helper
            params.is = templatePath;

            // Render the component using dust.helpers['component']
            return chunk.helper('component', context, bodies, params);
        };
    };

    return {
        normalizeName: normalizeName,
        makeHelper: makeHelper
    };
});
